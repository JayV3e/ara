<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.0/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.39.0/js/tempusdominus-bootstrap-4.min.js" integrity="sha512-k6/Bkb8Fxf/c1Tkyl39yJwcOZ1P4cRrJu77p83zJjN2Z55prbFHxPs9vN7q3l3+tSMGPDdoH51AEU8Vgo1cgAA==" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.39.0/css/tempusdominus-bootstrap-4.min.css" integrity="sha512-3JRrEUwaCkFUBLK1N8HehwQgu8e23jTH4np5NHOmQOobuC4ROQxFwFgBLTnhcnQRMs84muMh0PnnwXlPq5MGjg==" crossorigin="anonymous" />
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

<div class="form-row">
    <!-- started_after (date from) -->
    <div class="form-group col-xl-4">
      <label for="Started after" {% if request.GET.started_after %}style="font-weight:bold;"{% endif %}>From</label>
      <div class="input-group date" id="datetimepicker_after" data-target-input="nearest">
        <input type="text" class="form-control datetimepicker-input" data-target="#datetimepicker_after" id="started_after" name="started_after" />
        <div class="input-group-append" data-target="#datetimepicker_after" data-toggle="datetimepicker">
            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
        </div>
      </div>
    </div>
    <!-- started_before (date to) -->
    <div class="form-group col-xl-4">
      <label for="started_before" {% if request.GET.started_before %}style="font-weight:bold;"{% endif %}>To</label>
      <div class="input-group date" id="datetimepicker_before" data-target-input="nearest">
        <input type="text" class="form-control datetimepicker-input" data-target="#datetimepicker_before" id="started_before" name="started_before"/>
        <div class="input-group-append" data-target="#datetimepicker_before" data-toggle="datetimepicker">
            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
        </div>
      </div>
    </div>
</div>
<script>  
$(function () {
    $('#datetimepicker_after').datetimepicker({
        format: "YYYY-MM-DDThh:mm:ss.SSSSZ"
    });
    $('#datetimepicker_before').datetimepicker({
        format: "YYYY-MM-DDThh:mm:ss.SSSSZ"
    });
    // Auto-close is not working, this is a workaround
    $("#datetimepicker_after").on("change.datetimepicker", () => {              
      $("#datetimepicker_after").datetimepicker('hide')
    });
    $("#datetimepicker_before").on("change.datetimepicker", () => {              
      $("#datetimepicker_before").datetimepicker('hide')
    });
});
</script>
